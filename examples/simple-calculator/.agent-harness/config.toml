# Simple Calculator - Minimal Agent Harness Example

# --- Agent ---
model = "claude-sonnet-4-5-20250929"
system_prompt = "You are a Python developer building a calculator module with comprehensive tests."

# --- Session ---
max_turns = 1000
auto_continue_delay = 3
max_iterations = 10     # Limit to 10 sessions for this simple example

# --- Tools ---
[tools]
builtin = ["Read", "Write", "Edit", "Glob", "Grep", "Bash"]

# --- Security ---
[security]
permission_mode = "acceptEdits"

[security.sandbox]
enabled = true
auto_allow_bash_if_sandboxed = true

# No network access needed for this example
[security.sandbox.network]
allowed_domains = []
allow_local_binding = false

[security.permissions]
allow = ["Bash(python *)", "Bash(ls *)", "Bash(cat *)", "Bash(git *)"]
deny = []

# --- Progress Tracking ---
[tracking]
type = "json_checklist"
file = "feature_list.json"
passing_field = "passes"

# --- Error Recovery ---
[error_recovery]
max_consecutive_errors = 5
initial_backoff_seconds = 5.0
max_backoff_seconds = 120.0
backoff_multiplier = 2.0

# --- Phases ---
[[phases]]
name = "init"
prompt = "file:prompts/init.md"
run_once = true
condition = "not_exists:.agent-harness/feature_list.json"

[[phases]]
name = "build"
prompt = "file:prompts/build.md"

# --- Post-Run Instructions ---
post_run_instructions = ["python -m unittest test_calculator -v"]
